<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Save the Environment â€“ Together for a Cleaner Future</title>
    <link rel="stylesheet" href="assets/style.css">
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-firestore-compat.js"></script>
</head>
<body>
    <header>
        <h1>Save the Environment</h1>
        <nav>
            <a href="index.html">Home</a>
            <a href="about.html">About Us</a>
            <a href="projects.html">Projects</a>
            <a href="articles.html">Articles</a>
            <a href="gallery.html">Gallery</a>
            <a href="calendar.html">Calendar</a>
            <a href="newsletter.html">Newsletter</a>
            <a href="admin.html" id="admin-link" style="display:none;">Admin</a>
            <a href="dashboard.html" id="dashboard-link" style="display:none;">Dashboard</a>
            <a href="get-involved.html">Get Involved</a>
            <a href="contact.html">Contact</a>
        </nav>
        <!-- Social Media Links -->
        <div>
            <!--#include file="assets/social.html" -->
        </div>
        </nav>
    </header>
    <main>
        <!-- Image Carousel Section -->
        <div class="image-carousel">
            <div class="carousel-track">
                <img src="https://imgur.com/IdV4HEJ.jpg" alt="Community Action">
                <img src="https://i.imgur.com/dgkV6oP.jpg" alt="Tree Planting">
                <img src="https://imgur.com/uWnb5IY.jpg" alt="Clean Up">
               <img src="https://imgur.com/qU59LmX.jpg" alt="Clean Up">
                <img src="https://imgur.com/HBdvG5G.jpg" alt="Clean Up">
                <!-- Duplicate images for seamless loop -->
                <img src="https://imgur.com/IdV4HEJ.jpg" alt="Community Action">
                <img src="https://i.imgur.com/dgkV6oP.jpg" alt="Tree Planting">
                <img src="https://imgur.com/uWnb5IY.jpg" alt="Clean Up">
               <img src="https://imgur.com/qU59LmX.jpg" alt="Clean Up">
                <img src="https://imgur.com/HBdvG5G.jpg" alt="Clean Up">
            </div>
        </div>
        <!-- End of Carousel Section -->

        <!-- Other homepage sections go below -->
        <section>
            <button id="signout-btn" style="float:right; margin:1rem 0;">Sign Out</button>
            <a href="auth.html" style="float:right; margin:1rem 1rem 0 0;">Sign In</a>
        </section>

        <!-- Impact Stories Section -->
        <section>
            <h2>What we Plan to Achieve</h2>
            <div class="card">
                 <img src="https://imgur.com/WhQrny1.jpg" alt="Clean Up">
                <h3>Help Communities with Access to Clean Water</h3>
                <p>We plan to make clean water Accesible to everyone,this way we prevent water born diseases.</p>
            </div>
            <div class="card">
                <img src="https://imgur.com/DHcxTqQ.jpg" alt="Clean Up">
                <h3>Greener Schools</h3>
                <p>Students planted 500 trees in 2025, transforming their school grounds and learning about climate action.</p>
            </div>
            <!-- Add more cards for other stories as needed -->
        </section>

        <!-- Upcoming Events Section -->
        <section class="upcoming-events">
            <h3>Upcoming Events</h3>
            <ul id="events-list">
                <!-- Events will be loaded here -->
            </ul>
        </section>
        <section class="participate">
            <h3>Ways to Participate</h3>
            <p>Join us in making a positive impact!</p>
        </section>
    </main>
    <footer>
        <p>&copy; 2025 Save the Environment Initiative</p>
    </footer>

<script>
    var firebaseConfig = {
        apiKey: "AIzaSyCeTfoIIWlPkn68sZe-0m8oHUgxLgIiyRA",
        authDomain: "save-the-environment-49649.firebaseapp.com",
        projectId: "save-the-environment-49649",
        storageBucket: "save-the-environment-49649.firebasestorage.app",
        messagingSenderId: "724730117051",
        appId: "1:724730117051:web:4bec6010aedccec0a5e29e",
        measurementId: "G-S4ZSM54DY1"
    };
    if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
    }
    var auth = firebase.auth();
    var db = firebase.firestore();
    document.addEventListener('DOMContentLoaded', function() {
        auth.onAuthStateChanged(function(user) {
            var adminLink = document.getElementById('admin-link');
            var dashboardLink = document.getElementById('dashboard-link');
            if (user) {
                adminLink.style.display = 'inline';
                dashboardLink.style.display = 'inline';
            } else {
                adminLink.style.display = 'none';
                dashboardLink.style.display = 'none';
                setTimeout(function() {
                    console.log('You are not signed in. You cannot access the admin page.');
                }, 100);
            }
        });
        var signoutBtn = document.getElementById('signout-btn');
        if (signoutBtn) {
            signoutBtn.onclick = function() {
                auth.signOut().then(() => {
                    window.location.href = 'auth.html';
                });
            };
        }
        // Load events from Firestore
        db.collection('events').orderBy('date').get().then(function(querySnapshot) {
            var eventsList = document.getElementById('events-list');
            eventsList.innerHTML = '';
            querySnapshot.forEach(function(doc) {
                var event = doc.data();
                var dateStr = event.date ? new Date(event.date).toLocaleDateString() : '';
                var li = document.createElement('li');
                li.innerHTML = `<a href="event-details.html?id=${doc.id}" style="font-weight:bold;color:#388e3c;text-decoration:none;">${event.title}</a> - ${dateStr} <br> <span style='color:#388e3c;'>${event.location || ''}</span>`;
                eventsList.appendChild(li);
            });
            if (!eventsList.hasChildNodes()) {
                eventsList.innerHTML = '<li>No upcoming events yet.</li>';
            }
        }).catch(function(err) {
            var eventsList = document.getElementById('events-list');
            eventsList.innerHTML = `<li style='color:red;'>Error loading events: ${err.message}</li>`;
        });
    });
</script>
</body>
</html>
